!function(){const e="giscus-session",t=document.currentScript,s=t.dataset.giscusOrigin||"https://giscus.app";function formatError(e){return`[giscus] An error occurred. Error message: "${e}".`}function getMetaContent(e,t=!1){const s=t?`meta[property='og:${e}'],`:"",r=document.querySelector(s+`meta[name='${e}']`);return r?r.content:""}const r=new URL(location.href);let i=r.searchParams.get("giscus")||"";const o=localStorage.getItem(e);r.searchParams.delete("giscus"),r.hash="";const n=r.toString();if(i)localStorage.setItem(e,JSON.stringify(i)),history.replaceState(void 0,document.title,n);else if(o)try{i=JSON.parse(o)}catch(t){localStorage.removeItem(e),console.warn(`${formatError(t?.message)} Session has been cleared.`)}const a=t.dataset,c={};switch(c.origin=n,c.session=i,c.theme=a.theme,c.reactionsEnabled=a.reactionsEnabled||"1",c.emitMetadata=a.emitMetadata||"0",c.inputPosition=a.inputPosition||"bottom",c.repo=a.repo,c.repoId=a.repoId,c.category=a.category||"",c.categoryId=a.categoryId,c.strict=a.strict||"0",c.description=getMetaContent("description",!0),c.backLink=getMetaContent("giscus:backlink")||n,a.mapping){case"url":c.term=n;break;case"title":c.term=document.title;break;case"og:title":c.term=getMetaContent("title",!0);break;case"specific":c.term=a.term;break;case"number":c.number=a.term;break;default:c.term=location.pathname.length<2?"index":location.pathname.substring(1).replace(/\.\w+$/,"")}const l=document.querySelector(".giscus"),g=l&&l.id;g&&(c.origin=`${n}#${g}`);const d=a.lang?`/${a.lang}`:"",u=`${s}${d}/widget?${new URLSearchParams(c)}`,m="lazy"===a.loading?"lazy":void 0,p=document.createElement("iframe"),f={class:"giscus-frame giscus-frame--loading",title:"Comments",scrolling:"no",allow:"clipboard-write",src:u,loading:m};if(Object.entries(f).forEach((([e,t])=>t&&p.setAttribute(e,t))),p.style.opacity="0",p.addEventListener("load",(()=>{p.style.removeProperty("opacity"),p.classList.remove("giscus-frame--loading")})),!document.getElementById("giscus-css")){const e=document.createElement("style");e.id="giscus-css",e.textContent=".giscus,.giscus-frame{width:100%;min-height:150px}.giscus-frame{border:none;color-scheme:light dark}.giscus-frame--loading{opacity:0}",document.head.prepend(e)}if(l){for(;l.firstChild;)l.firstChild.remove();l.appendChild(p)}else{const e=document.createElement("div");e.setAttribute("class","giscus"),e.appendChild(p),t.insertAdjacentElement("afterend",e)}const h="Please consider reporting this error at https://github.com/giscus/giscus/issues/new.";function signOut(){delete c.session;const e=`${s}${d}/widget?${new URLSearchParams(c)}`;p.src=e}window.addEventListener("message",(t=>{if(t.origin!==s)return;const{data:r}=t;if("object"!=typeof r||!r.giscus)return;if(r.giscus.resizeHeight&&(p.style.height=`${r.giscus.resizeHeight}px`),r.giscus.signOut)return localStorage.removeItem(e),console.log("[giscus] User has logged out. Session has been cleared."),void signOut();if(!r.giscus.error)return;const i=r.giscus.error;i.includes("Bad credentials")||i.includes("Invalid state value")||i.includes("State has expired")?null!==localStorage.getItem(e)?(localStorage.removeItem(e),console.warn(`${formatError(i)} Session has been cleared.`),signOut()):o||console.error(`${formatError(i)} No session is stored initially. ${h}`):i.includes("Discussion not found")?console.warn(`[giscus] ${i}. A new discussion will be created if a comment/reaction is submitted.`):i.includes("API rate limit exceeded")?console.warn(formatError(i)):console.error(`${formatError(i)} ${h}`)})),window.__giscus={signOut:signOut,setConfig(e){p.contentWindow?.postMessage({giscus:{setConfig:e}},s)}}}();
//# sourceMappingURL=giscus-client.source.js.map