!function(){const e="giscus-session",t=document.currentScript,s=t.dataset.giscusOrigin||"https://giscus.app";function i(e){return`[giscus] An error occurred. Error message: "${e}".`}function o(e,t=!1){const s=t?`meta[property='og:${e}'],`:"",n=document.querySelector(s+`meta[name='${e}']`);return n?n.content:""}const n=new URL(location.href);let r=n.searchParams.get("giscus")||"";const c=localStorage.getItem(e);n.searchParams.delete("giscus"),n.hash="";const a=n.toString();if(r)localStorage.setItem(e,JSON.stringify(r)),history.replaceState(void 0,document.title,a),window.dispatchEvent(new CustomEvent("giscus:session-change",{detail:{session:r}}));else if(c)try{r=JSON.parse(c)}catch(t){localStorage.removeItem(e),console.warn(`${i(t?.message)} Session has been cleared.`)}const l=t.dataset,d={};switch(d.origin=a,d.session=r,d.theme=l.theme,d.reactionsEnabled=l.reactionsEnabled||"1",d.emitMetadata=l.emitMetadata||"0",d.inputPosition=l.inputPosition||"bottom",d.repo=l.repo,d.repoId=l.repoId,d.category=l.category||"",d.categoryId=l.categoryId,d.strict=l.strict||"0",d.description=o("description",!0),d.backLink=o("giscus:backlink")||a,l.mapping){case"url":d.term=a;break;case"title":d.term=document.title;break;case"og:title":d.term=o("title",!0);break;case"specific":d.term=l.term;break;case"number":d.number=l.term;break;default:d.term=location.pathname.length<2?"index":decodeURIComponent(location.pathname.substring(1).replace(/\.\w+$/,""))}const g=document.querySelector(".giscus"),u=g&&g.id;u&&(d.origin=`${a}#${u}`);const m=l.lang?`/${l.lang}`:"",p=`${s}${m}/widget?${new URLSearchParams(d)}`,h="lazy"===l.loading?"lazy":void 0,f=document.createElement("iframe"),w={class:"giscus-frame giscus-frame--loading",title:"Comments",scrolling:"no",allow:"clipboard-write",src:p,loading:h};if(Object.entries(w).forEach((([e,t])=>t&&f.setAttribute(e,t))),f.style.opacity="0",f.addEventListener("load",(()=>{f.style.removeProperty("opacity"),f.classList.remove("giscus-frame--loading")})),!document.getElementById("giscus-css")){const e=document.createElement("style");e.id="giscus-css",e.textContent=".giscus,.giscus-frame{width:100%;min-height:150px}.giscus-frame{border:none;color-scheme:light dark}.giscus-frame--loading{opacity:0}",document.head.prepend(e)}if(g){for(;g.firstChild;)g.firstChild.remove();g.appendChild(f)}else{const e=document.createElement("div");e.setAttribute("class","giscus"),e.appendChild(f),t.insertAdjacentElement("afterend",e)}const b="Please consider reporting this error at https://github.com/giscus/giscus/issues/new.",y="giscus-scroll-position";if(window.addEventListener("beforeunload",(()=>{sessionStorage.setItem(y,String(window.scrollY))})),r&&!c){const e=sessionStorage.getItem(y);if(e){sessionStorage.removeItem(y);const t=parseInt(e,10);!isNaN(t)&&t>0&&requestAnimationFrame((()=>{window.scrollTo({top:t,behavior:"instant"})}))}}let S=-1,$=null;function v(){delete d.session;const e=`${s}${m}/widget?${new URLSearchParams(d)}`;f.src=e}window.addEventListener("message",(t=>{if(t.origin!==s)return;const{data:n}=t;if("object"!=typeof n||!n.giscus)return;if(n.giscus.resizeHeight&&(f.style.height=`${n.giscus.resizeHeight}px`),n.giscus.discussion&&"number"==typeof n.giscus.discussion.totalCommentCount){const e=n.giscus.discussion.totalCommentCount;S>=0&&e>S&&(clearTimeout($),$=setTimeout((()=>{f.isConnected&&f.contentWindow&&f.contentWindow.postMessage({giscus:{setConfig:{term:d.term}}},s)}),3e3)),S=e}if(n.giscus.signOut)return localStorage.removeItem(e),console.log("[giscus] User has logged out. Session has been cleared."),void v();if(!n.giscus.error)return;const a=n.giscus.error;a.includes("Bad credentials")||a.includes("Invalid state value")||a.includes("State has expired")?null!==localStorage.getItem(e)?(localStorage.removeItem(e),console.warn(`${i(a)} Session has been cleared.`),v()):c||console.error(`${i(a)} No session is stored initially. ${b}`):a.includes("Discussion not found")?(console.warn(`[giscus] ${a}. A new discussion will be created if a comment/reaction is submitted.`),r&&(clearTimeout($),$=setTimeout((()=>{f.isConnected&&f.contentWindow&&f.contentWindow.postMessage({giscus:{setConfig:{term:d.term}}},s)}),5e3))):a.includes("API rate limit exceeded")?console.warn(i(a)):console.error(`${i(a)} ${b}`)})),window.__giscus={signOut:v,setConfig(e){f.contentWindow?.postMessage({giscus:{setConfig:e}},s)},refresh(){f.contentWindow?.postMessage({giscus:{setConfig:{term:d.term}}},s)},reload(){f.src=p}}}();
//# sourceMappingURL=giscus-client.js.map