!function(){function g(e){return`[giscus] An error occurred. Error message: "${e}".`}function l(e,s=!1){return(e=document.querySelector((s?`meta[property='og:${e}'],`:"")+`meta[name='${e}']`))?e.content:""}function m(){delete n.session;const e=`${s}${a}/widget?${new URLSearchParams(n)}`;d.src=e}const e=document.currentScript,s=e.dataset.giscusOrigin||"https://giscus.app";var t=new URL(location.href),i=t.searchParams.get("giscus")||"";const o=localStorage.getItem("giscus-session");t.searchParams.delete("giscus"),t.hash="";var r=t.toString();if(i)localStorage.setItem("giscus-session",JSON.stringify(i)),history.replaceState(void 0,document.title,r);else if(o)try{i=JSON.parse(o)}catch(e){localStorage.removeItem("giscus-session"),console.warn(`${g(e?.message)} Session has been cleared.`)}t=e.dataset;const n={origin:r};switch(n.session=i,n.theme=t.theme,n.reactionsEnabled=t.reactionsEnabled||"1",n.emitMetadata=t.emitMetadata||"0",n.inputPosition=t.inputPosition||"bottom",n.repo=t.repo,n.repoId=t.repoId,n.category=t.category||"",n.categoryId=t.categoryId,n.strict=t.strict||"0",n.description=l("description",!0),n.backLink=l("giscus:backlink")||r,t.mapping){case"url":n.term=r;break;case"title":n.term=document.title;break;case"og:title":n.term=l("title",!0);break;case"specific":n.term=t.term;break;case"number":n.number=t.term;break;default:n.term=2>location.pathname.length?"index":location.pathname.substring(1).replace(/\.\w+$/,"")}const c=(i=document.querySelector(".giscus"))&&i.id;c&&(n.origin=`${r}#${c}`);const a=t.lang?`/${t.lang}`:"";r=`${s}${a}/widget?${new URLSearchParams(n)}`,t="lazy"===t.loading?"lazy":void 0;const d=document.createElement("iframe");if(Object.entries({class:"giscus-frame giscus-frame--loading",title:"Comments",scrolling:"no",allow:"clipboard-write",src:r,loading:t}).forEach((([e,s])=>s&&d.setAttribute(e,s))),d.style.opacity="0",d.addEventListener("load",(()=>{d.style.removeProperty("opacity"),d.classList.remove("giscus-frame--loading")})),document.getElementById("giscus-css")||((t=document.createElement("style")).id="giscus-css",t.textContent=".giscus,.giscus-frame{width:100%;min-height:150px}.giscus-frame{border:none;color-scheme:light dark}.giscus-frame--loading{opacity:0}",document.head.prepend(t)),i){for(;i.firstChild;)i.firstChild.remove();i.appendChild(d)}else(i=document.createElement("div")).setAttribute("class","giscus"),i.appendChild(d),e.insertAdjacentElement("afterend",i);window.addEventListener("message",(e=>{e.origin===s&&(({data:e}=e),"object"==typeof e&&e.giscus&&(e.giscus.resizeHeight&&(d.style.height=`${e.giscus.resizeHeight}px`),e.giscus.signOut?(localStorage.removeItem("giscus-session"),console.log("[giscus] User has logged out. Session has been cleared."),m()):e.giscus.error&&((e=e.giscus.error).includes("Bad credentials")||e.includes("Invalid state value")||e.includes("State has expired")?null!==localStorage.getItem("giscus-session")?(localStorage.removeItem("giscus-session"),console.warn(`${g(e)} Session has been cleared.`),m()):o||console.error(`${g(e)} No session is stored initially. Please consider reporting this error at https://github.com/giscus/giscus/issues/new.`):e.includes("Discussion not found")?console.warn(`[giscus] ${e}. A new discussion will be created if a comment/reaction is submitted.`):e.includes("API rate limit exceeded")?console.warn(g(e)):console.error(`${g(e)} Please consider reporting this error at https://github.com/giscus/giscus/issues/new.`))))})),window.__giscus={signOut:m,setConfig(e){d.contentWindow?.postMessage({giscus:{setConfig:e}},s)}}}();
//# sourceMappingURL=giscus-client.js.map