{"version":3,"file":"masonry-reactions.source.js","names":["GISCUS_SESSION_KEY","GITHUB_GRAPHQL_API","dataEl","document","getElementById","reactionsData","JSON","parse","textContent","e","console","warn","imageReactions","repo","repoId","categoryId","discussionTerm","discussionNumber","repoOwner","repoName","split","viewerReactions","loadViewerReactions","data","localStorage","getItem","getLocalStorageKey","userToken","isAuthenticated","saveViewerReactions","setItem","stringify","parseImageIdFromBody","body","match","trim","initializeHeartButtons","querySelectorAll","forEach","container","img","querySelector","imageId","findImageIdFromSrc","src","cleanSrc","decodeURIComponent","Object","keys","includes","endsWith","getAttribute","dataset","heartBtn","createHeartButton","reaction","btn","createElement","className","commentId","reacted","disabled","setAttribute","innerHTML","heartCount","classList","add","addEventListener","handleHeartClick","appendChild","updateHeartButton","viewerHasReacted","CSS","escape","countEl","String","toggle","async","preventDefault","stopPropagation","currentTarget","contains","showLoginPrompt","prompt","timer","setTimeout","remove","clearTimeout","requestAnimationFrame","currentlyReacted","currentCount","parseInt","newReacted","Math","max","success","toggleHeartReaction","token","hasReacted","query","fetch","method","headers","Authorization","variables","content","subjectId","ok","err","applyLocalViewerState","entries","tryAuthenticate","retryCount","getGiscusToken","raw","session","res","encodeURIComponent","json","status","enableHeartButtons","liveComments","fetchLiveReactions","owner","name","number","result","repository","discussion","comments","nodes","applyLiveReactions","comment","heartGroup","reactionGroups","find","g","users","totalCount","id","URLSearchParams","location","search","has","init","window","key","newValue","readyState"],"sources":["0"],"mappings":"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","ignoreList":[]}