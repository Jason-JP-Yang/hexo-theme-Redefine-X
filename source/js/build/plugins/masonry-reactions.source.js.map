{"version":3,"file":"masonry-reactions.source.js","names":["GISCUS_SESSION_KEY","GISCUS_ORIGIN","GITHUB_GRAPHQL_API","currentPagePath","imageReactions","userToken","isAuthenticated","isInitialized","getPageConfig","el","document","getElementById","JSON","parse","textContent","async","getGiscusToken","raw","localStorage","getItem","session","res","fetch","method","headers","body","encodeURIComponent","ok","json","token","graphqlFetch","query","variables","stringify","Error","status","parseImageId","match","trim","getCacheKey","term","clearCache","sessionStorage","removeItem","initializeHeartButtons","imageIds","items","querySelectorAll","imageIdSet","Set","forEach","container","querySelector","src","preloader","getAttribute","img","imageId","findImageIdFromSrc","cleanSrc","decodeURIComponent","split","srcBase","replace","idBase","includes","endsWith","dataset","heartBtn","createHeartButton","btn","createElement","className","setAttribute","innerHTML","addEventListener","handleHeartClick","appendChild","updateHeartButton","heartCount","viewerHasReacted","CSS","escape","countEl","String","reacted","classList","toggle","e","preventDefault","stopPropagation","currentTarget","contains","window","location","href","getGiscusLoginUrl","redirectUri","reaction","currentlyReacted","currentCount","add","newCount","Math","max","newReacted","success","toggleHeartReaction","commentId","hasReacted","Authorization","content","subjectId","remove","config","discussionTerm","init","newPagePath","cached","getCache","Date","now","timestamp","applyCachedReactions","data","Object","entries","fetchAndApplyLive","fetchDiscussionData","repo","owner","name","searchQuery","result","q","errors","console","warn","nodes","search","discussion","find","n","title","allComments","comments","pageInfo","hasNextPage","pageResult","number","after","endCursor","moreComments","repository","push","discussionNumber","applyReactions","comment","heartGroup","reactionGroups","g","users","totalCount","id","setCache","setItem","err","key","newValue","then","event","origin","giscus","signOut","swup","hooks","on","onPageView","cleanup","requestAnimationFrame","readyState"],"sources":["0"],"mappings":"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","ignoreList":[]}