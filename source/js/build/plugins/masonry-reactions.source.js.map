{"version":3,"file":"masonry-reactions.source.js","names":["GISCUS_SESSION_KEY","GISCUS_ORIGIN","GITHUB_GRAPHQL_API","CACHE_KEY_PREFIX","CACHE_TTL","MASONRY_SCROLL_KEY","PENDING_HEART_KEY","currentPagePath","imageReactions","userToken","isAuthenticated","isInitialized","swupHooked","getPageConfig","el","document","getElementById","JSON","parse","textContent","async","getGiscusToken","raw","localStorage","getItem","session","res","fetch","method","headers","body","encodeURIComponent","ok","json","token","getGiscusLoginUrl","redirectUri","location","href","fetchFromGiscusAPI","repo","term","category","first","after","params","URLSearchParams","number","strict","String","set","status","console","warn","err","fetchAllComments","firstPage","discussion","allComments","comments","pageInfo","hasNextPage","endCursor","nextPage","push","checkViewerReactions","commentIds","length","result","i","batch","slice","aliases","map","id","j","join","Authorization","stringify","query","data","errors","node","reactionGroups","heart","find","g","content","viewerHasReacted","toggleHeartReaction","commentId","hasReacted","mode","variables","subjectId","parseImageId","bodyHTML","match","trim","getCacheKey","getCache","sessionStorage","cached","Date","now","timestamp","removeItem","setCache","setItem","clearCache","createHeartButton","imageId","btn","createElement","className","dataset","setAttribute","innerHTML","addEventListener","handleHeartClick","initializeHeartButtons","imageIds","items","querySelectorAll","imageIdSet","Set","forEach","container","querySelector","src","preloader","getAttribute","img","findImageIdFromSrc","classList","contains","add","appendChild","srcBase","decodeURIComponent","split","replace","idBase","includes","endsWith","updateHeartButton","heartCount","CSS","escape","countEl","reacted","toggle","applyReactions","comment","reactions","HEART","count","applyCachedReactions","Object","entries","e","preventDefault","stopPropagation","currentTarget","window","scrollY","clickedImageId","reaction","currentlyReacted","currentCount","newCount","Math","max","newReacted","success","remove","config","discussionTerm","init","newPagePath","pendingHeart","savedScroll","parseInt","isNaN","requestAnimationFrame","scrollTo","top","behavior","fetchAndApplyLive","handlePendingHeart","setTimeout","click","values","r","filter","Boolean","viewerReactions","cleanup","onPageView","tryRegisterSwup","s","eval","hooks","on","key","newValue","then","event","origin","giscus","signOut","syncOAuthSession","giscusParam","URL","searchParams","get","readyState","attempts","pollInterval","setInterval","clearInterval"],"sources":["0"],"mappings":"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","ignoreList":[]}