{"version":3,"file":"masonry-reactions.source.js","names":["GISCUS_SESSION_KEY","GITHUB_GRAPHQL_API","dataEl","document","getElementById","reactionsData","JSON","parse","textContent","e","console","warn","imageReactions","repo","repoId","categoryId","discussionTerm","discussionNumber","repoOwner","repoName","split","viewerReactions","loadViewerReactions","data","localStorage","getItem","getLocalStorageKey","userToken","isAuthenticated","saveViewerReactions","setItem","stringify","parseImageIdFromBody","body","match","trim","initializeHeartButtons","querySelectorAll","forEach","container","src","preloader","querySelector","getAttribute","img","imageId","findImageIdFromSrc","cleanSrc","decodeURIComponent","srcBase","replace","Object","keys","idBase","includes","endsWith","dataset","heartBtn","createHeartButton","reaction","btn","createElement","className","commentId","reacted","disabled","setAttribute","innerHTML","heartCount","classList","add","addEventListener","handleHeartClick","appendChild","updateHeartButton","viewerHasReacted","CSS","escape","countEl","String","toggle","async","preventDefault","stopPropagation","currentTarget","contains","showLoginPrompt","prompt","timer","setTimeout","remove","clearTimeout","requestAnimationFrame","currentlyReacted","currentCount","parseInt","newReacted","Math","max","success","toggleHeartReaction","token","hasReacted","query","fetch","method","headers","Authorization","variables","content","subjectId","ok","err","applyLocalViewerState","entries","tryAuthenticate","retryCount","getGiscusToken","raw","session","res","encodeURIComponent","json","status","enableHeartButtons","liveComments","fetchLiveReactions","owner","name","number","result","repository","discussion","comments","nodes","applyLiveReactions","comment","heartGroup","reactionGroups","find","g","users","totalCount","id","URLSearchParams","location","search","has","init","window","key","newValue","readyState"],"sources":["0"],"mappings":"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","ignoreList":[]}