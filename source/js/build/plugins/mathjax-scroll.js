(function(){var BLOCK=".mathjax-block",WRAPPER=".mathjax-scroll-wrapper",THRESH=2;function mkHint(e){var t=document.createElement("div");t.className="mathjax-scroll-hint mathjax-scroll-hint--"+e;var i=document.createElement("i");return i.className="left"===e?"fa-solid fa-caret-left":"fa-solid fa-caret-right",t.appendChild(i),t}function hints(e){var t=e.querySelector(".mathjax-scroll-hint--left"),i=e.querySelector(".mathjax-scroll-hint--right");return t||(t=mkHint("left"),e.appendChild(t)),i||(i=mkHint("right"),e.appendChild(i)),{L:t,R:i}}function getOverflow(e){var t=e.scrollWidth-e.clientWidth;if(t>1)return t;var i=e.querySelector("mjx-container");if(i){var n=i.scrollWidth-e.clientWidth;if(n>1)return n}return 0}function refresh(e){var t=e.querySelector(WRAPPER);if(t){var i=getOverflow(t);if(i<=0){e.classList.remove("mathjax-overflow");for(var n=e.querySelectorAll(".mathjax-scroll-hint"),r=0;r<n.length;r++)n[r].classList.remove("is-visible")}else{e.classList.add("mathjax-overflow");var l=Math.round(t.scrollLeft),a=hints(e);a.L.classList.toggle("is-visible",l>THRESH),a.R.classList.toggle("is-visible",i-l>THRESH)}}}function onWheel(e,t){var i=getOverflow(e);if(!(i<=0)){var n=Math.abs(t.deltaX)>Math.abs(t.deltaY)?t.deltaX:t.deltaY,r=Math.round(e.scrollLeft);n>0&&i-r<1||n<0&&r<1||(t.preventDefault(),e.scrollLeft+=n)}}function bind(e){if(!e.dataset.mjBound){e.dataset.mjBound="1";var t=e.querySelector(WRAPPER);t&&(t.addEventListener("scroll",(function(){refresh(e)}),{passive:!0}),t.addEventListener("wheel",(function(e){onWheel(t,e)}),{passive:!1}))}}function initAll(){for(var e=document.querySelectorAll(BLOCK),t=0;t<e.length;t++)bind(e[t]),refresh(e[t])}function initWithRetry(){initAll(),setTimeout(initAll,300),setTimeout(initAll,1e3)}function trySwup(){try{var s=eval("typeof swup!=='undefined'?swup:null");if(s&&s.hooks)return s.hooks.on("page:view",(function(){requestAnimationFrame(initWithRetry)})),!0}catch(e){}return!1}function scheduleSwup(){if(!trySwup())var e=0,t=setInterval((function(){(trySwup()||++e>=30)&&clearInterval(t)}),100)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){initWithRetry(),scheduleSwup()})):(initWithRetry(),scheduleSwup()),window.addEventListener("resize",(function(){requestAnimationFrame(initAll)}))})();
//# sourceMappingURL=mathjax-scroll.js.map